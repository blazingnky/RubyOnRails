# Application 작성
----------------------

#### *Application 생성 명령어*
~~~~~~~~~~~~~~~~~~~~
> rails new appName [option]
~~~~~~~~~~~~~~~~~~~~

-------------------------

#### *HTTP 서버 실행*
~~~~~~~~~~~~~~~~~~~~
> WEBrick - 간단한 HTTP 서버 - 표준포트번호 : 3000
*명령어 > rails server
> http://localhost:3000/

*cmd 실행 -> 폴더 경로 이동 -> rails server 입력 -> http://localhost:3000/컨트롤러 이름(/메소드 이름)
~~~~~~~~~~~~~~~~~~~

------------------------

# 컨트롤러의 기본
------------------------
###### * 컨트롤러 클래스
~~~~~~~~~~~~~~
> 각각의 요청을 처리하는 본체..비지니스 로직(모델) 호출, 결과 출력(뷰)
~~~~~~~~~~~~~~

--------------

#### *컨트롤러 클래스 생성, 삭제 명령어*
~~~~~~~~~~~~~~~~~~
> rails generate controller <name> <options>
> rails destroy controller <name>
~~~~~~~~~~~~~~~~~~~
---------------

#### *컨트롤러 클래스의 기본 구문*
1. 파일은 UTF-8 형식으로 저장
> 매직 코멘트(magic comment) --> # coding: utf-8 (Ruby 2.0 이후 버전은 생략해도 됨)
2. ApplicationController 클래스 상속
3. 구체적인 처리를 실행하는 것은 액션 메서드
  * 클라이언트로부터의 요청을 처리하는 메서드
  * 한 개 이상의 액션 메서드를 생성할 수 있음
  * 여러 개의 액션을 한꺼번에 관리
  * public, private
4. 액션 메서드의 역할
  * render 메서드 - 문자열 출력
  ~~~~~~
  > render text: value
  ~~~~~~

---------------------

#### *라우팅 기초와 이해*
* Rails는 클라이언트에서 요청을 받았을 때, 라우팅으로 호출해야 하는 컨트롤러와 액션을 결정함
* URL 패턴

# 뷰 기본
--------------
* ERB (Embedded Ruby)
* ERB 템플릿은 HTML에 Ruby 스크립트를 삽입한 구조
* HTML 기반이므로 최종적인 출력을 떠올려 가면서 개발 진행이 가능

-----------------------------------------

* *ERB 템플릿 장점*
~~~~~~~~~~~~~~~
* 임의의 Ruby 스크립트를 넣어 조건 분기 또는 반복 등의 처리를 자유롭게 적용할 수 있음 
  (템플릿은 결과를 표시하는 용도로만 사용하도록 한다.)
* 뷰 헬퍼를 사용해 데이터베이스에서 추출한 데이터를 기반으로 링크 또는 입력 양식 요소 등을 간단하게 생성할 수 있음
~~~~~~~~~~~~~~~

-------------------------
#####템플릿 변수 생성하고 적용하기
* 템플릿을 이용하려면 일단 요청 처리를 하는 컨트롤러 클래스 (액션 메서드)를 만들어야 함

ex. hello_controller.rb
~~~~~~~~~~~~~~~~~~~~
class HelloController < ApplicationController
 ...생략...
 def view
  @msg = "Hello Rails World!!"
 end
end
~~~~~~~~~~~~~~~~~~~~
######★템플릿 변수 설정 - 액션 메서드에서 무조건 설정하는 일
* 템플릿 변수
~~~~~~~~~~~~
* 액션 메서드에서 데이터를 뷰로 전달할 때 사용하는 변수
* view - controller를 연결
~~~~~~~~~~~~
* 액션에서는 출력하고 싶은 데이터를 준비하고 템플릿에서는 해당 데이터를 어디에 출력할지 어떻게 출력할지 등을 정의
-----------------------------------

#####템플릿 파일 작성
* 템플릿 파일 위치
> /app/views/<컨트롤러 이름>/<액션 이름>.html.erb

ex) hello/view.html.erb
~~~~~~~~~~~~~
<div id="main">
<%= @msg %>
</div>
~~~~~~~~~~~~~

* *동적 처리 방법*
~~~~~~~~~~~~~~~
<% [임의의 코드> %>
<% [무언가 값을 리턴하는 식] %>
<% ... -%>, <%= ... -%> => ' - ' 기호는 블록 뒤의 공백과 개행을 제거
~~~~~~~~~~~~~~~

* 뷰 자동 생성
~~~~~~~~~~~~~~~~~~~~~~~~~~~
* >rails generate controller hello show*
* 여러 개의 액션을 한꺼번에 생성할 수 있음
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-------------------------------------

####공통 레이아웃 적용
* Rails는 기본적으로 application.html.erb의 <%= yield %> 에 개별적인 템플릿을 넣어 최종 출력을 생성함
* 레이아웃은 웹 사이트의 외곽에 위치한 요소
* *레이아웃 사용의 장점*
~~~~~~~~~~~~~~~~~~~~~~~`
* 사이트의 전체적인 디자인을 변경할 때도 레이아웃만 변경하면 됨
* 개별 템플릿에는 페이지 자체의 내용만을 작성할 수 있음
* 사이트 구조(네비게이션)에 일관성을 부여할 수 있음
~~~~~~~~~~~~~~~~~~~~~~
* Rails는 기본적으로 개별 템플릿에 레이아웃 템플릿이 적용

--------------------------------

#모델 기본
-----------------------
* *O/R 맵퍼 ( Object / Relational Mapper)*
~~~~~~~~~~~~~
관계형 데이터베이스와 객체 지향 언어의 객체 사이에 징검다리를 놓아주는 라이브러리
애플리케이션과 데이터베이스의 구조적인 차이를 객체 관계 불일치라 함
이러한 잘못된 매칭을 제거하기 위한 툴
~~~~~~~~~~~~
* O/R 맵퍼로 사용되는 액티브 레코드를 사용하면 Rails에서 관계형 데이터 베이스를 마치 객체 다루듯이 조작이 가능
* 애플리케이션이 받는 영향이 최소화
* database.yml
* YAML (Ain't Markup Language)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* 구조화된 데이터를 작성하기 위한 파일 형식
* 들여쓰기 구조를 표현 - 들여쓰기는 반드기 공백(띄어쓰기 두번)사용
* <매개변수 이름>:<값> 형태로 매개변수 표시
~~~~~~~~~~~~~~~~~~~~~~~~~
----------------------------------------

####모델 생성

* 모델 클래스 생성 명령어
~~~~~~~~~
rails generate model name field:type [...] [options]
~~~~~~~~

--------------
* 마이그레이션 파일 실행 명령어
~~~~~~~~~~~~
rake db:migrate
~~~~~~~~~~~

-----------------------
* Fixture 기능 - 테스트 데이터를 데이터베이스 내부로 넣어주는 기능
~~~~~~~~~~~~~~~~~~~
rake db:fixtures:load FIXTURES=books
~~~~~~~~~~~~~~~~~~~~

----------------------

* 데이터베이스 클라이언트 실행
~~~~~~~~~~~~~~~~~
>rails dbconsole
sqlite> .tables
sqlite> .schema books
sqlite> SELECT * FROM books;
sqlite> .quit
~~~~~~~~~~~~~~~~

# 데이터 추출 기본 (순서) : 예제를 통한 설명
~~~~~~~~~~~~~~~~~~~~~
1. list 액션을 추가 : 해당 컨트롤러에 list 메소드 추가
2. 템플릿 작성 : hello#list 액션에 대응되는 템플릿 파일 list.html.erb를 작성
                 템플릿 파일은 컨트롤러에 대응되는 /app/views/hello 폴더 내부에 만들면 됨
3. rails server : 서버 실행
4. http://localhost:3000/hello/list 접속
~~~~~~~~~~~~~~~~~~~~~~

### 127.0.0.1
~~~~~~~~~~~~~~
자신의 PC를 가리키는 주소 = localhost
~~~~~~~~~~~~~
